/*! jSketch drawing lib (all in one) | v2.0.1 | 2022-12-09 */
!function(t){function e(t,e){if(t)return"string"==typeof t&&(t=document.querySelector(t)),this.setContext(t),this.stageWidth=t.offsetWidth,this.stageHeight=t.offsetHeight,this.data=e,this.callStack=[],this.setDefaults();throw new Error("Sketchable requires a DOM element or selector.")}e.prototype={setContext:function(t){if(t)return this.canvas=t,this.context=t.getContext("2d"),this;throw new Error("No canvas element specified.")},setDefaults:function(){var t,e={fillStyle:this.data.fillStyle||"#F00",strokeStyle:this.data.strokeStyle||"#F0F",lineWidth:this.data.lineWidth||2,lineCap:this.data.lineCap||"round",lineJoin:this.data.lineJoin||"round",miterLimit:this.data.miterLimit||10};for(t in e)this.callStack.push({property:t,value:e[t]});return this.saveGraphics(e).restoreGraphics()},size:function(t,e){t=parseFloat(t),e=parseFloat(e);return this.stageWidth=t,this.stageHeight=e,this.canvas.width=t,this.canvas.height=e,this.restoreGraphics(),this},background:function(t){var e=[0,0,this.stageWidth,this.stageHeight];return this.beginFill(t),this.context.fillRect.apply(this.context,e),this.endFill(),this.callStack.push({property:"fillStyle",value:t}),this.callStack.push({method:"fillRect",args:e}),this},stage:function(t,e,n){return this.size(t,e).background(n),this},beginFill:function(t){return this.saveGraphics({fillStyle:t}),this.context.fillStyle=t,this.callStack.push({property:"fillStyle",value:t}),this},endFill:function(){return this.restoreGraphics(),this},lineStyle:function(t,e,n,i,s){return this.saveGraphics({strokeStyle:t,lineWidth:e,lineCap:n,lineJoin:i,miterLimit:s}).restoreGraphics()},moveTo:function(t,e){var n=[].slice.call(arguments);return this.context.moveTo.apply(this.context,n),this.callStack.push({method:"moveTo",args:n}),this},lineTo:function(t,e){var n=[].slice.call(arguments);return this.context.lineTo.apply(this.context,n),this.callStack.push({method:"lineTo",args:n}),this},line:function(t,e,n,i){return this.moveTo(t,e),this.lineTo(n,i),this},curveTo:function(t,e,n,i){n=[n,i,t,e];return this.context.quadraticCurveTo.apply(this.context,n),this.callStack.push({method:"quadraticCurveTo",args:n}),this},curve:function(t,e,n,i,s,o){return this.moveTo(t,e),this.curveTo(n,i,s,o),this},stroke:function(){return this.context.stroke(),this.callStack.push({method:"stroke"}),this},strokeRect:function(t,e,n,i){var s=[].slice.call(arguments);return this.context.beginPath(),this.context.strokeRect.apply(this.context,s),this.context.closePath(),this.callStack.push({method:"strokeRect",args:s}),this},fillRect:function(t,e,n,i){var s=[].slice.call(arguments);return this.context.beginPath(),this.context.fillRect.apply(this.context,s),this.context.closePath(),this.callStack.push({method:"fillRect",args:s}),this},rect:function(t,e,n,i){var s=[].slice.call(arguments);return this.fillRect.apply(this,s),this.strokeRect.apply(this,s),this},strokeCircle:function(t,e,n){t=[t,e,n,0,2*Math.PI,!1];return this.context.beginPath(),this.context.arc.apply(this.context,t),this.context.stroke(),this.context.closePath(),this.callStack.push({method:"strokeCircle",args:t}),this},fillCircle:function(t,e,n){t=[t,e,n,0,2*Math.PI,!1];return this.context.beginPath(),this.context.arc.apply(this.context,t),this.context.fill(),this.context.closePath(),this.callStack.push({method:"fillCircle",args:t}),this},circle:function(t,e,n){var i=[].slice.call(arguments);return this.fillCircle.apply(this,i),this.strokeCircle.apply(this,i),this},radialCircle:function(t,e,n,i,s){var o=this.context.createRadialGradient(t,e,n,t,e,i=void 0===i||i<0?1:i);s&&"array"===s.constructor.name.toLowerCase()||(s=[this.context.fillStyle,"white"]);for(var r=0;r<s.length;r++){var a=s[r];o.addColorStop(r,a)}return this.beginFill(o).fillCircle(t,e,n).endFill(),this},beginPath:function(){return this.context.beginPath(),this.callStack.push({method:"beginPath"}),this},closePath:function(){return this.context.closePath(),this.callStack.push({method:"closePath"}),this},eraser:function(){return this.context.globalCompositeOperation="destination-out",this.callStack.push({property:"comp-op",value:"dst_out"}),this},pencil:function(){return this.context.globalCompositeOperation="source-over",this.callStack.push({property:"comp-op",value:"src_over"}),this},clear:function(){var t=[0,0,this.stageWidth,this.stageHeight];return this.context.clearRect.apply(this.context,t),this.callStack.push({method:"clear"}),this},save:function(){return this.context.save(),this.callStack.push({method:"save"}),this},restore:function(){return this.context.restore(),this.callStack.push({method:"restore"}),this},saveGraphics:function(t){for(var e in t){var n=t[e];n&&n!==this.data[e]&&(this.data[e]=n,this.callStack.push({property:e,value:n}))}return this},restoreGraphics:function(){for(var t in this.data)this.context[t]=this.data[t];return this},drawImage:function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this,s=new Image;return s.src=t,s.onload=function(){i.context.drawImage(s,e,n),i.callStack.push({method:"drawImage",args:[s,e,n]}),i.callStack.push({method:"removeAsync"})},s.onerror=function(){i.callStack.push({method:"removeAsync"})},i.callStack.push({method:"addAsync"}),this}},t.jSketch=e}(this),function(t){t.jSketch.prototype.toSVG=function(e){if("function"!=typeof e)throw new Error("You must supply a callback in toSVG() method.");var i=this,s=[],n=0,o={},r={addAsync:function(){return n++,""},removeAsync:function(){return n--,""},drawImage:function(t,e,n){return'<image preserveAspectRatio="none"           width="'+t.width+'"           height="'+t.height+'"           transform="translate('+e+", "+n+')"           xlink:href="'+t.src+'"></image>'},fillRect:function(t,e,n,i){return'<rect stroke="none"           width="'+n+'"           height="'+i+'"           x="'+t+'"           y="'+e+'"           fill="'+o.fillStyle+'"></rect>'},strokeRect:function(t,e,n,i){return'<rect fill="none"           width="'+n+'"           height="'+i+'"           x="'+t+'"           y="'+e+'"           stroke="'+o.strokeStyle+'"           stroke-width="'+o.lineWidth+'"           stroke-linecap="'+o.lineCap+'"           stroke-linejoin="'+o.lineJoin+'"           stroke-miterlimit="'+o.miterLimit+'"></rect>'},strokeCircle:function(t,e,n){return'<circle fill="none"           cx="'+t+'"           cy="'+e+'"           r="'+n+'"           stroke="'+o.strokeStyle+'"           stroke-width="'+o.lineWidth+'" />'},fillCircle:function(t,e,n){return'<circle stroke="none"           cx="'+t+'"           cy="'+e+'"           r="'+n+'"           fill="'+o.fillStyle+'" />'},beginPath:function(){return s=[],""},closePath:function(){var t="";return 0<s.length&&(t='<path fill="none"             stroke="'+o.strokeStyle+'"             stroke-width="'+o.lineWidth+'"             stroke-linecap="'+o.lineCap+'"             stroke-linejoin="'+o.lineJoin+'"             stroke-miterlimit="'+o.miterLimit+'"             d="'+s.join(" ")+'" />',s=[]),t},moveTo:function(t,e){return s.push("M "+t+" "+e),""},lineTo:function(t,e){return s.push("L "+t+" "+e),""},quadraticCurveTo:function(t,e,n,i){return s.push("Q "+t+" "+e+" "+n+" "+i),""}};function a(){var t='<?xml version="1.0" encoding="utf-8" standalone="no" ?>';return(t=(t=(t=(t=(t+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"         "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">')+('<svg version="1.1"         xmlns="http://www.w3.org/2000/svg"         xmlns:svg="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         width="'+i.stageWidth+'"         height="'+i.stageHeight+'"         viewBox="0 0 '+i.stageWidth+" "+i.stageHeight+'">')+"<desc>Generated with jSketch: https://luis.leiva.name/jsketch/</desc>")+"<defs></defs>"+"<g>")+function(){for(var t="",e=0;e<i.callStack.length;e++){var n=i.callStack[e];n.property&&"object"!=typeof n.value?o[n.property]=n.value:n.method?r[n.method]?t+=r[n.method].apply(null,n.args):console.warn("Method not implemented:",n.method):console.warn("Unknown call:",n)}return t}())+"</g>"+"</svg>").replace(/\s+/g," ")}var c=setInterval(function(){{var t;n<=0?(clearInterval(c),t=a(),e(t)):console.info("Waiting for %s async operations to be finished ...",n)}},150);return this}}(this),function(p){var d="sketchable",n={init:function(t){var i=p.extend(!0,{},p.fn.sketchable.defaults,t||{});return this.each(function(){var t,e=p(this),n=(e.data(d)||(e.bind("mousedown",o),e.bind("mousemove",r),e.bind("mouseup",a),e.bind("touchstart",c),e.bind("touchmove",u),e.bind("touchend",f),s(e,i)),new jSketch(this,i.graphics));for(t in e.data(d,{strokes:[],coords:{},timestamp:0,sketch:n,options:i}),"function"==typeof i.events.init&&i.events.init(e,e.data(d)),p.fn.sketchable.plugins)p.fn.sketchable.plugins[t](e)})},config:function(n){return n?this.each(function(){var t=p(this),e=t.data(d);e.options=p.extend(!0,{},p.fn.sketchable.defaults,e.options,n),s(t)}):p(this).data(d).options},data:function(t){var e=p(this).data(d);return t?e[t]:e},strokes:function(f){return f?this.each(function(){var t=p(this);t.data(d).strokes=f;var e=t.data(d),n=e.options,i=e.sketch;i.clear();for(var s,o,r=0;r<e.strokes.length;r++)for(var a=e.strokes[r],c=0;c<a.length;c++){var h=a[c],l=a[c+1],u=!0;if(!(u=3<h.length?1===h[3]:u)&&!n.mouseupMovements)break;0===c?(0<n.graphics.firstPointSize&&i.beginFill(n.graphics.fillStyle).fillCircle(h[0],h[1],n.graphics.firstPointSize).endFill(),u?(s=n.graphics.strokeStyle,o=n.graphics.lineWidth):n.mouseupMovements&&(s=n.mouseupMovements.strokeStyle||"#DDD",o=n.mouseupMovements.lineWidth||1),i.lineStyle(s,o)):l&&i.beginPath().line(h[0],h[1],l[0],l[1]).stroke().closePath()}}):p(this).data(d).strokes},handler:function(n){return this.each(function(){var t=p(this),e=t.data(d);n(t,e)})},trigger:function(i){return this.each(function(){var t=p(this),e=t.data(d),n=e.options.events;n&&"function"==typeof n[i]&&n[i](t,e)})},clear:function(i){return this.each(function(){var t=p(this),e=t.data(d),n=e.options;e.sketch.clear(),i||(e.strokes=[],e.coords={}),"function"==typeof n.events.clear&&n.events.clear(t,e)})},reset:function(i){return this.each(function(){var t=p(this),e=t.data(d),n=e.options;t.sketchable("destroy").sketchable(i),"function"==typeof n.events.reset&&n.events.reset(t,e)})},destroy:function(){return this.each(function(){var t=p(this),e=t.data(d),n=e.options;t.unbind("mouseup",a),t.unbind("mousemove",r),t.unbind("mousedown",o),t.unbind("touchstart",c),t.unbind("touchmove",u),t.unbind("touchend",f),t.removeData(d),n&&"function"==typeof n.events.destroy&&n.events.destroy(t,e)})},decorate:function(s,o,r){return this.each(function(){var t,e=p(this).data(d),n=e.options,i="_bound$"+s+"."+r;e[i]||(e[i]=!0,n.events&&"function"==typeof n.events[s]?(t=n.events[s],n.events[s]=function(){t.apply(this,arguments),o.apply(this,arguments)}):n.events[s]=o)})}};function s(t,e){e=e||t.data(d).options;t=t.get(0);e.cssCursors&&(t.style.cursor=e.interactive?"pointer":"not-allowed"),t.onselectstart=function(){return!1}}function h(t){var e=p(t.target).offset();return{x:Math.round(t.pageX-e.left),y:Math.round(t.pageY-e.top),time:Date.now()}}function l(t,e,n){var i=e.coords[t];e.options.relTimestamps&&(0===e.strokes.length&&0===i.length&&(e.timestamp=n.time),n.time-=e.timestamp),i.push([n.x,n.y,n.time,+e.sketch.isDrawing,t]),e.options.filterCoords&&1<i.length&&(t=i[n=i.length-1],e=i[n-1],t[0]==e[0])&&t[1]==e[1]&&i.splice(n,1)}function o(t){if(t.originalEvent.touches)return!1;e(t)}function r(t){if(t.originalEvent.touches)return!1;i(t)}function a(t){if(t.originalEvent.touches)return!1;m(t)}function c(t){v(t,e),t.preventDefault()}function u(t){v(t,i),t.preventDefault()}function f(t){v(t,m),t.preventDefault()}function e(t){if(3===t.which)return!1;var e,n,i=Math.abs(t.identifier||0),s=p(t.target),o=s.data(d),r=o.options;r.interactive&&(e=h(t),"function"==typeof r.events.mousedownBefore&&r.events.mousedownBefore(s,o,t),0<r.graphics.firstPointSize&&o.sketch.beginFill(r.graphics.fillStyle).fillCircle(e.x,e.y,r.graphics.firstPointSize).endFill(),o.sketch.isDrawing=!0,o.sketch.beginPath(),0<(n=(n=o.coords[i])||[]).length&&o.strokes.push(n),o.coords[i]=[],l(i,o,e),"function"==typeof r.events.mousedown)&&r.events.mousedown(s,o,t)}function i(t){var e,n,i,s,o=Math.abs(t.identifier||0),r=p(t.target),a=r.data(d),c=a.options;c.interactive&&(c.mouseupMovements&&0!==a.strokes.length||a.sketch.isDrawing)&&(e=h(t),"function"==typeof c.events.mousemoveBefore&&c.events.mousemoveBefore(r,a,t),(n=(n=a.coords[o])[n.length-1])&&(a.sketch.isDrawing?(i=c.graphics.strokeStyle,s=c.graphics.lineWidth):c.mouseupMovements&&(i=c.mouseupMovements.strokeStyle||"#DDD",s=c.mouseupMovements.lineWidth||1),a.sketch.lineStyle(i,s).line(n[0],n[1],e.x,e.y).stroke()),l(o,a,e),"function"==typeof c.events.mousemove)&&c.events.mousemove(r,a,t)}function m(t){var e=Math.abs(t.identifier||0),n=p(t.target),i=n.data(d),s=i.options;s.interactive&&("function"==typeof s.events.mouseupBefore&&s.events.mouseupBefore(n,i,t),i.sketch.isDrawing=!1,i.sketch.closePath(),i.strokes.push(i.coords[e]),i.coords[e]=[],"function"==typeof s.events.mouseup)&&s.events.mouseup(n,i,t)}function v(t,e){var n=p(t.target).data(d).options;if(n.multitouch)for(var i,s=t.originalEvent.changedTouches,o=0;o<s.length;o++)k(i=s[o],t.originalEvent),e(i);else k(i=t.originalEvent.touches[0],t.originalEvent),e(i)}function k(t,e){t.type||(t.type=e.type)}p.fn.sketchable=function(t){var e=Array.prototype.slice.call(arguments,1);return"object"!=typeof t&&t?-1<t.indexOf(".")?function(t,e){e=e.split(".");for(var n=0;n<e.length;n++){var i=e[n];t=t[i]}return t}(n,t).apply(this,e):n[t]?n[t].apply(this,e):(p.error("Unknown method: "+t),this):n.init.apply(this,arguments)},p.fn.sketchable.api=n,p.fn.sketchable.plugins={},p.fn.sketchable.defaults={interactive:!0,mouseupMovements:!1,relTimestamps:!1,multitouch:!0,cssCursors:!0,filterCoords:!1,events:{},graphics:{firstPointSize:3,lineWidth:3,strokeStyle:"#F0F",fillStyle:"#F0F",lineCap:"round",lineJoin:"round",miterLimit:10}}}(jQuery),function(r){var a="sketchable";function c(s){var i=[],o=-1,e=this;function n(n){s.sketchable("handler",function(t,e){n&&0<n.identifier?i[o].strokes=e.strokes.slice():(i.push({image:t.get(0).toDataURL(),strokes:e.strokes.slice(),callStack:e.sketch.callStack.slice()}),o++)})}function t(t){if(t.ctrlKey)switch(t.which){case 26:t.shiftKey?e.redo():e.undo();break;case 25:e.redo()}}this.undo=function(){return 0<o&&(o--,this.restore(),s.sketchable("trigger","mementoundo")),this},this.redo=function(){return o<i.length-1&&(o++,this.restore(),s.sketchable("trigger","mementoredo")),this},this.reset=function(){return i=[],o=-1,s.sketchable("trigger","mementoreset"),n(),this},this.save=function(t){return n(t),s.sketchable("trigger","mementosave"),this},this.state=function(){return JSON.parse(JSON.stringify(i[o]))},this.restore=function(t){t=t||i[o];var e=new Image;return e.src=t.image,e.onload=function(){var n,i;n=this,i=t,s.sketchable("handler",function(t,e){e.sketch.clear(),e.sketch.context.drawImage(n,0,0),e.strokes=i.strokes.slice(),e.sketch.callStack=i.callStack.slice()}),s.sketchable("trigger","mementochange")},this},this.init=function(){return r(document).off("keypress",t),r(document).on("keypress",t),s.sketchable("trigger","mementoinit"),n(),this},this.destroy=function(){return r(document).off("keypress",t),s.sketchable("trigger","mementodestroy"),this.reset()}}r.fn.sketchable.plugins.memento=function(e){for(var t={clear:function(t,e){e.memento.reset()},mouseup:function(t,e,n){e.memento.save(n)},destroy:function(t,e){e.memento.destroy()}},n="mouseup clear destroy".split(" "),i=0;i<n.length;i++){var s=n[i];e.sketchable("decorate",s,t[s],"memento")}r.extend(r.fn.sketchable.api,{memento:{undo:function(){return r(this).data(a).memento.undo(),e},redo:function(){return r(this).data(a).memento.redo(),e},save:function(){return r(this).data(a).memento.save(),e},state:function(){return r(this).data(a).memento.state()},restore:function(t){return r(this).data(a).memento.restore(t),e}}});var o=e.sketchable("data");o.memento=new c(e),o.memento.init()}}(jQuery),function(o){var u="sketchable";function r(r){for(var a,t=r.data(u),c=t.sketch,e=t.strokes,t=(t.options.events,t.options.graphics),h=[],n=0;n<e.length;n++)for(var i=e[n],s=0;s<i.length;s++){var o=(o=i[s])instanceof Array?{x:o[0],y:o[1],time:o[2],strokeId:o[4]}:o;o.strokeId||(o.strokeId=n),h.push(o)}r.sketchable("trigger","animationstart");var l=0;c.lineStyle(t.strokeStyle,t.lineWidth),function t(){a=requestAnimationFrame(t);try{var e,n=c,i=l,s=(o=h)[i],o=o[i+1];0!==i&&s.strokeId===o.strokeId||(n.data.firstPointSize&&(e=0<i?o:s,n.beginFill(n.data.strokeStyle).fillCircle(e.x,e.y,n.data.firstPointSize).endFill()),0<i&&r.sketchable("trigger","animationstep"),n.closePath().beginPath()),s.strokeId===o.strokeId&&n.line(s.x,s.y,o.x,o.y).stroke()}catch(t){console.error(t),cancelAnimationFrame(a)}++l==h.length-1&&(cancelAnimationFrame(a),r.sketchable("trigger","animationend"))}(),this.cancel=function(){return cancelAnimationFrame(a),this}}o.fn.sketchable.plugins.animate=function(t){for(var e={clear:function(t,e){e.animate&&e.animate.cancel()},destroy:function(t,e){e.animate&&e.animate.cancel()}},n="clear destroy".split(" "),i=0;i<n.length;i++){var s=n[i];t.sketchable("decorate",s,e[s],"animate")}o.extend(o.fn.sketchable.api,{animate:{strokes:function(){return o(this).data(u).animate=new r(t),t}}})}}(jQuery),function(a){var c="sketchable";a.fn.sketchable.plugins.serializer=function(r){a.extend(a.fn.sketchable.api,{serializer:{save:function(){var t=a(this).data(c);return JSON.stringify({strokes:t.strokes,options:t.options,actions:t.sketch.callStack})},load:function(t){for(var e=a(this).data(c),n=JSON.parse(t),i=e.sketch,s=0;s<n.actions.length;s++){var o=n.actions[s];o.property&&"object"!=typeof o.value?i.data[o.property]=o.value:o.method?i[o.method].apply(i,o.args):console.warn("Unknown call:",o)}return e.sketch.callStack=n.actions.slice(),e.strokes=n.strokes.slice(),e.options=n.options,r}}})}}(jQuery),function(o){o.fn.sketchable.plugins.svg=function(e){for(var t={clear:function(t,e){e.sketch.callStack=[]},destroy:function(t,e){e.sketch.callStack=[]}},n="clear destroy".split(" "),i=0;i<n.length;i++){var s=n[i];e.sketchable("decorate",s,t[s],"svg")}o.extend(o.fn.sketchable.api,{svg:{create:function(t){return o(this).data("sketchable").sketch.toSVG(t),e}}})}}(jQuery);